;

                    DPROG - Device Programmer

                          A ZCPR3 Tool



       D - DPROG Summary        1 - Characters
       P - DPROG Programming    2 - Format Specifications
                                3 - Word Definitions
                                4 - DPROG Commands


:D

Command: DPROG 1.0

Syntax:

     DPROG                    <-- program from STD.DPG
     DPROG filename           <-- program from filename.DPG
     DPROG filename.typ       <-- program from filename.typ

Function:

     DPROÇ  ió  useä tï prograí thå devicå aô  thå  Console¬ 
List¬  oò  Puncè Device®   Iô readó thå indicateä oò implieä 
filå afteò á patè searcè anä printó ouô stringó accordinç tï 
thå  formató containeä iî thå file®   Thå DPROÇ tooì caî  bå 
useä tï senä anù seô oæ bytå valueó iî anù desireä formaô tï 
eitheò thå Console¬ List¬ oò Puncè devices.

Options: None

Comments:

     Thå  filå useä tï prograí thå devicå ió á  conventionaì 
ASCIÉ texô filå whicè containó fouò basiã typeó oæ lines:

          1®  commenô  lineó - thoså lineó whoså firsô  non-
blanë characteò ió á semicoloî (;)

          2®  worä definitioî lineó - thoså lineó thaô begiî 
witè á dasè (-© iî columî onå followeä immediatelù bù á word

          3®   DPROÇ  commanä lineó - thoså lineó  beginninç 
witè á speciaì commanä characteò tï DPROG

          4®   outpuô lineó - anù otheò linå whicè doeó  noô 
fiô  onå  oæ  thå threå typeó oæ lineó  above»  theså  lineó 
generatå thå outpuô whicè ió senô tï thå device

     Thå  detailó  oæ  ho÷ tï writå programó  iî  thå  DPROÇ 
languagå arå covereä elsewherå iî thió HLÐ file.

Selected Error Messages: Self-explanatory

Examples of Use:

     DPROG          -- program from STD.DPG
     DPROG ASM      -- program from ASM.DPG


:P

                        DPROG Programming

     DPROÇ  ió  á  3Ë interpreteò foò á  devicå  programminç 
language®   Wordó (á symboì uð tï 1¶ characteró long©  whicè 
contaiî   anù   combinatioî   oæ   outpuô   formaô   controì 
instructions¬  texô  strings¬  anä referenceó tï otheò wordó 
caî bå defineä iî thió language®  Oncå á worä ió defined¬ iô 
caî  bå  nameä  iî  aî  outpuô  line¬   anä  itó  definitioî 
(includinç embeddeä formaô controls© wilì bå translateä  anä 
outpuô  tï  eitheò thå console¬  printer¬  oò puncè  device®  
Worä  referenceó caî bå nesteä uð tï 12¸ leveló  deep®   Foò 
example:



;
; Sample DPROG programming file
;

; Define Basic Words
-esc      (%c)           "\E"      ; the escape character
-ctrly                   "^Y"      ; the character control-Y
-test     (Char: %c %x %d\n)       ; character test format
-normal_form   (%c)                ; normal output format

;
; Use Words
;
"This is a test\n" test "ABC" normal_form "\nEnd of Test"



     Thå  outpuô froí thå executioî oæ thå outpuô linå  wilì 
be:

This is a test
Char: A 41 65
Char: B 42 66
Char: C 43 67
End of Test



     Useä iî conjunctioî witè botè formaô definitionó (wherå 
theù  arå outpuô literally© anä quoteä stringó  (wherå  theù 
arå outpuô accordinç tï thå currenô formaô definition)¬  thå 
followinç escapå sequenceó apply:

     ^c   Define control character (2-char sequence)
     \b   Backspace char
     \d   Delete char (DEL)
     \e   Escape char (ESC)
     \l   New Line char (CRLF pair)
     \n   Line Feed Char (LF)
     \r   Carriage Return char (CR)
     \t   Tab char (TAB)
     \#   Numeric value (forms are \d for decimal, \dH
               for hex, \dq for octal, \dB for
               binary: \1, \245, \33h, \0feH, \111b,
               \77q, etc)


     Additionally¬ thå formaô expressioî ió oæ thå form

                      (<format text>)

wherå  <formaô  text¾ caî contaiî anù characteò sequencå  aó 
welì aó recognizå thå followinç outpuô directives:

     %c   Output chars as ASCII characters
     %d   Output chars as floating decimal ASCII chars
     %x   Output chars as 2 hex ASCII chars
     %2   Output chars as 2 decimal ASCII chars
     %3   Output chars as 3 decimal ASCII chars

     Anù texô caî surrounä theså outpuô directives¬ anä eacè 
directivå  caî bå useä aó manù timeó aó desireä iî á  formaô 
expression®   Oncå á formaô expressioî ió given¬  iô ió useä 
untiì á ne÷ expressioî ió defined®  Foò example:


            (%x %d ) "\12\10hA" (%c) "\12\10hA"

will output:

                  0C 12 10 16 41 65 ^L^PA

wherå  ^Ì  anä  ^Ð arå thå  ASCIÉ  control-Ì  anä  control-Ð 
characters.


     Finally¬  tï  makå alì oæ thió complete¬  thå useò  caî 
direcô outpuô tï thå console¬  printer¬ oò puncè aô anù timå 
(foò programminç whateveò devicå yoõ wanô tï program)¬ therå 
arå  debugginç commandó (pauså tï examinå output¬  dumð worä 
definitioî table¬  dumð formaô expression)¬  anä yoõ caî seô 
uð aó manù *.DPÇ fileó thaô yoõ wanô tï prograí á varietù oæ 
functions®   DPROÇ ió á truå ZCPR³ utility¬  anä iô searcheó 
thå  patè  foò thå *.DPÇ files¬  sï thå *.DPÇ fileó  caî  bå 
retaineä  iî thå ROOÔ directorù anä theù wilì bå founä  froí 
anù directorù oî thå system.

     DPROG is used by issuing a command of the form:

          DPROG filename.typ  <-- program from filename.typ
          DPROG filename      <-- program from filename.DPG
          DPROG               <-- program from STD.DPG


     DPROG¬  oæ  course¬  caî bå useä withiî aî  alias¬  ZEØ 
commanä file¬ oò anù otheò ZCPR³ environment®  Foò instance¬ 
thå followinç Worä Staò aliaó ió reasonable:

     IF NEC=$2
          DEV L NEC      <-- assign printer
          WSN $1         <-- run NEC version of WS
     ELSE
          DEV L TTY      <-- assign printer
          DPROG CORRESP  <-- program printer for
                              correspondence
          WS $1          <-- run proper version of WS
     FI

:1

     Thå  followinç  symboló  arå  useä  tï  definå  speciaì 
characters under DPROG:

     ^c   Define control character (2-char sequence)
     \b   Backspace char
     \d   Delete char (DEL)
     \e   Escape char (ESC)
     \l   New Line char (CRLF pair)
     \n   Line Feed Char (LF)
     \r   Carriage Return char (CR)
     \t   Tab char (TAB)
     \#   Numeric value (forms are \d for decimal, \dH
               for hex, \dq for octal, \dB for
               binary: \1, \245, \33h, \0feH, \111b,
               \77q, etc)

:2

     Thå followinç escapå sequenceó (thå escapå characteò ió 
%© arå valiä iî formaô specificationó (whicè arå encloseä iî 
parentheses) under DPROG:

     %c   Output chars as ASCII characters
     %d   Output chars as floating decimal ASCII chars
     %x   Output chars as 2 hex ASCII chars
     %2   Output chars as 2 decimal ASCII chars
     %3   Output chars as 3 decimal ASCII chars

:3

     A word definition under DPROG takes the following form:

          -word_symbol  text_of_definition

where "-" is the first character in the line.

:4
Š     Thå   followinç  DPROÇ  commandó  arå   availablå   foò 
debugging and other purposes:

     Output Direction:
          >C   Direct Output to Console
          >L   Direct Output to List (Printer)
          >P   Direct Output to Punch

     Data Dump:
          =    Dump both Word Table (Symbols) and Format
          =F   Dump current Format Specification
          =S   Dump current Word Table (Symbol Table)

