The ZCPR3 System-Oriented Utilities
CMDRUN    Extended Command Processor (ECP)
ERRORn    Error Handlers
LDR       ZCPR3 System Segment Loader
PATH      Path Display and Set
QUIET     Display and Set the Quiet Flag
REG       Register Display and Manipulation
SETFILE   System File Assignment
SHCTRL    Shell Stack Display and Manipulation
SHOW      System Configuration Display and Error Handler
Z3INS     ZCPR3 System Installation Program
Z3LOC     ZCPR3 System Segment Locator
:The ZCPR3 System-Oriented Utilities

     Thió  HELĞ  filå  containó informatioî oî  thoså  ZCPR³ 
utilitieó   whicè  accesó  featureó  oæ  thå  ZCPR³   Systeí 
specifically.  These features include:

          o Extended Command Processors
          o Error Handlers
          o the ZCPR3 System Segments
          o the ZCPR3 Command Search Path
          o the System Registers
          o the System Files
          o the ZCPR3 System Addresses
          o the ZCPR3 System Status

:CMDRUN    Extended Command Processor (ECP)

Command:  CMDRUN

Syntax:

     CMDRUN text    (this command is usually executed by
                         ZCPR3 itself and not the user)
Function:

     CMDRUÎ  ió á samplå Extendeä Commanä Processor®   Iô ió 
invokeä automaticallù bù ZCPR³ wheî thå useò commanä ió  noô 
founä  viá  thå commanä searcè patè anä nï erroò handleò  ió 
engaged.

     Thå  texô  whicè followó thå verâ ió thå  texô  oæ  thå 
original command line.


Options:

     None

Comments:

     CMDRUÎ  ió  onlù á simplå sample®   Iô showó  thaô  thå 
originaì  commanä linå ió no÷ availablå iî thå commanä  taiì 
buffeò (aô 80H)®   Thå formaì CMDRUÎ whicè thå useò programó 
foò  hió ZCPR³ Systeí caî extracô thå originaì commanä  linå 
from this buffer and manipulate it as desired.

Selected Error Messages:

     None

Examples of Use:

     None

:ERRORn    Error Handlers
                                                              ERROR1
Command:  ERROR1 1.0

Syntax:

     ERROR1

Function:

     ERROR±  ió  aî Erroò Handler®   Iæ thå useò  runó  thió 
program¬ iô installó itselæ aó thå systeí erroò handler®  Iæ 
ZCPR³ cannoô finä thå COÍ filå referenceä bù á commanä verb¬ 
iô  invokeó  thå  installeä Erroò  Handleò  anä  passeó  thå 
commanä linå tï it.

Options:
     None

                                                              ERROR1
Comments:

     ERROR± displayó thå erroò linå tï thå useò anä provideó 
hií witè fouò optionó aó tï ho÷ tï procesó thió line:

       1. Replace the command in error with a new command
       2. Skip the command in error and resume execution
          with the next command
       3. Replace the entire command line
       4® Thro÷ awaù thå commanä linå anä resumå user
          control

Selected Error Messages:
     Self-Explanatory

Examples of Use:

     ERROR1
          -- install Error Handler
                                                              ERROR2
Command:  ERROR2 1.0

Syntax:

     ERROR2

Function:

     ERROR2  ió  aî Erroò Handler®   Iæ thå useò  runó  thió 
program¬ iô installó itselæ aó thå systeí erroò handler®  Iæ 
ZCPR³ cannoô finä thå COÍ filå referenceä bù á commanä verb¬ 
iô  invokeó  thå  installeä Erroò  Handleò  anä  passeó  thå 
commanä linå tï it.

Options:
     None

                                                              ERROR2
Comments:

     ERROR2 displayó thå erroò linå tï thå useò anä provideó 
hií witè fouò optionó aó tï ho÷ tï procesó thió line:

       1. Replace the command in error with a new command
       2. Skip the command in error and resume execution
          with the next command
       3. Replace the entire command line
       4® Thro÷ awaù thå commanä linå anä resumå user
          control

     Unlikå ERROR1¬ ERROR² ió screen-oriented¬ havinç á mucè 
"flashier" display.  It uses the Z3TCAP for support.

Selected Error Messages:
     Self-Explanatory

                                                              ERROR2
Examples of Use:

     ERROR2
          -- install Error Handler

                                                              ERROR3
Command:  ERROR3 1.0

Syntax:

     ERROR3

Function:

     ERROR3  ió  aî Erroò Handler®   Iæ thå useò  runó  thió 
program¬ iô installó itselæ aó thå systeí erroò handler®  Iæ 
ZCPR³ cannoô finä thå COÍ filå referenceä bù á commanä verb¬ 
iô  invokeó  thå  installeä Erroò  Handleò  anä  passeó  thå 
commanä linå tï it.

Options:
     None

                                                              ERROR3
Comments:

     ERROR³  displayó thå namå oæ thå COÍ filå whicè waó noô 
founä anä theî flusheó thå commanä line¬  returninç  controì 
to the user.

Selected Error Messages:
     None

Examples of Use:

     ERROR3
          -- install ERROR3

                                                              ERROR4
Command:  ERROR4 1.0

Syntax:

     ERROR4

Function:

     ERROR4  ió  aî Erroò Handler®   Iæ thå useò  runó  thió 
program¬ iô installó itselæ aó thå systeí erroò handler®  Iæ 
ZCPR³ cannoô finä thå COÍ filå referenceä bù á commanä verb¬ 
iô  invokeó  thå  installeä Erroò  Handleò  anä  passeó  thå 
commanä linå tï it.

Options:
     None

                                                              ERROR4
Comments:

     ERROR´  printó  thå namå oæ thå COÍ filå whicè waó  noô 
founä  anä theî advanceó tï thå nexô commanä iî thå  commanä 
linå buffer®   Iæ therå ió nï nexô command¬  useò controì ió 
resumed®   Iæ  therå ió á nexô  command¬  commanä  executioî 
resumes there.

Selected Error Messages:
     None

Examples of Use:

     ERROR4
          -- install Error Handler

                                                              ERRORX
Command:  ERRORX 1.0

Syntax:

     ERRORX

Function:

     ERRORØ disengageó thå currenô erroò handler¬ leavinç nï 
erroò  handleò enabled®   Thå defaulô erroò controì facilitù 
oæ ZCPR³ ió no÷ iî effect¬  wherå iæ aî erroò occuró iî  thå 
commanä  line¬  thå commanä linå froí thaô poinô forwarä  ió 
printed (followed by a '?').

Options:
     None

                                                              ERRORX
Comments:

     None

Selected Error Messages:

     No error messages are generated by ERRORX.

Examples of Use:

     ERRORX
          -- disengage any Error Handler currently enabled

:LDR       ZCPR3 System Segment Loader

Command:  LDR 1.0

Syntax:

     LDR ufn1,ufn2,...

Function:

     LDÒ  ió  á  general-purposå Systeí Segmenô  loadeò  foò 
ZCPR3®  Iô loadó alì oæ thå ZCPR³ Systeí Segmentó intï theiò 
appropriatå  buffers¬  checkinç oî theiò formaô anä  contenô 
beforå  approvinç  anä completinç eacè  load®   Eacè  Systeí 
Segment is specified unambiguously.

Options:

     None

Comments:

     Thå  followinç Systeí Segmentó arå loadeä  intï  memorù 
buffers by LDR:

          *.ENV files - Environment Descriptors
          *.FCP files - Flow Command Packages
          *.IOP files - Input/Output Packages
          *.NDR files - Named Directory Files
          *.RCP files - Resident Command Packages
          *.Z3T files - Z3TCAP Entries

     Foò  eacè  filå loaded¬  thå contentó oæ thå  filå  arå 
loadeä intï á memorù buffeò anä examined®  Baseä oî thå filå 
type¬  segment-uniquå  structuraì checkó arå performed®   Iæ 
thå  checkó  arå  passed¬  thå segmenô ió  copieä  intï  thå 
correcô  memorù  buffeò baseä oî thå datá containeä  iî  thå 
Environmenô Descriptor®   Iæ thå checkó arå noô  passed¬  aî 
erroò  messagå  ió issueä anä thå nexô filå iî thå  lisô  ió 
processed.

     Sincå  thå  Environmenô Descriptoò (whicè ió  currentlù 
residinç  iî  itó  memorù buffer© ió  useä  tï  providå  thå 
addresó  tï whicè tï copù thå loadeä Systeí Segment¬  iô  ió 
importanô  thaô  thå  Environmenô Descriptoò  bå  thå  firsô 
segmenô  loadeä bù LDR®   Aî alternativå tï thió ió thaô thå 
BIOÓ maù initializå thå Environmenô Descriptoò oî Colä Boot¬ 
buô  thió  woulä requirå á relativelù  largå  BIOÓ  overheaä 
(over 128 bytes for the initial Environment Descriptor).

     Wheî LDÒ loadó aî Environmenô Descriptor¬  iô placeó iô 
aô  thå  addresó  oæ thå Environmenô  Descriptoò  whicè  waó 
installeä iî LDÒ durinç thå ZCPR³ Systeí installation®   Anù 
otheò  Systeí Segmenô ió loadeä baseä oî thå contentó oæ thå 
current Environment Descriptor in memory.


Selected Error Messages:

     "filename.tyğ ió noô á Valiä Type¢ meanó thaô thå  filå 
typå oæ thå indicateä filå ió noô onå oæ ENV¬ FCP¬ IOP¬ NDR¬ 
RCP, or Z3T.

     "filename.tyğ  Containó  á Formaô Flaw¢ meanó thaô  thå 
structure of the indicated file was not correct.

Examples of Use:

     LDR SYS.ENV,MYIO.IOP,MYCMDS.RCP,MYIFS.FCP
          -- loaä SYS.ENV¬ and¬ baseä oî thå datá iî thió 
               Environment Descriptor, load the I/O Package
               MYIO.IOP, the Resident Command Package
               MYCMDS.RCP, and the Flow Command Package MYIFS.FCP

     LDR TERM1.Z3T
          -- replace the current Z3TCAP entry with TERM1.Z3T
:PATH      Path Display and Set

Command:  PATH 3.0

Syntax:

     PATH
or
     PATH path-expression

Function:

     PATÈ  allowó thå useò tï dï twï thingó  -- displaù  thå 
currenô patè oò seô á ne÷ path®   Thå displaù showó thå patè 
iî  threå  formatsº   Symbolic¬  Absolutå  (DU)¬  anä  Nameä 
Directorù  (DIR)®   Thå patè expressioî maù intermiø anù  oæ 
theså formató aó desireä tï expresó thå ne÷ path.

Options:

     None

Comments:

     Thå  PATÈ  Commanä  ió useä  tï  dynamicallù  changå  á 
memory-baseä  filå  searcè patè oò thå ZCPR³ commanä  searcè 
path®   Witè  PATH¬  thå  useò caî definå á ne÷ patè  tï  bå 
followeä oò hå caî vie÷ whaô thå currenô patè is.

     PATÈ determineó thå addresó oæ thå patè iô ió goinç  tï 
work with from the ZCPR3 Environment Descriptor.

     Thå  PATÈ commanä dealó witè patè expressions®   Á patè 
expressioî  ió  á sequencå oæ directorù nameó whicè  caî  bå 
expresseä  aó "ambiguous¢ DÕ forms¬  absolutå DÕ  forms¬  oò 
Nameä Directorù forms.


     Aî  absolutå  DÕ  forí indicateó  jusô  á  disë  letteò 
(currenô useò ió assumed)¬  jusô á useò numbeò (currenô disë 
ió  assumed)¬  oò botè á disë letteò anä á useò number®   Aî 
"ambiguous¢ DÕ forí ió onå iî whicè thå disë letteò oò  useò 
numbeò  oò  botè ió replaceä witè á "$¢  character¬  meaninç 
"currenô disk¢ oò "currenô user"®   Á Nameä Directorù  form¬ 
oæ course¬ ió simplù thå namå oæ á directory.

     Tï illustrate¬  let'ó saù thaô thå useò ió loggeä  intï 
B1®  Thå path

          $0 A$ A0 ROOT

represents the sequence

          B0 to A1 to A0 to ROOT


Selected Error Messages:

     "Baä Expressioî aô <text>¢ indicateó therå waó aî erroò 
in the path expression at the indicated point.

Examples of Use:

     PATH $0 A$ A15
      - seô  patè froí currenô disk/useò ° tï disë A/currenô 
useò tï disë A/useò 15

     PATH A$ ROOT
      - set path from disk A/current user to ROOT:

:QUIET     Display and Set the Quiet Flag

Command:  QUIET 1.0

Syntax:

     QUIET o

Function:

     QUIEÔ ió useä tï set¬ reset¬ anä displaù thå Quieô Flaç 
in the ZCPR3 Environment Descriptor.

Options:

     D - Display the Quiet Flag
     R - Reset (turn OFF) the Quiet Flag
     S - Set (turn ON) the Quiet Flag


Comments:

     Manù  ZCPR³ utilitieó reaä thå Quieô Flaç iî thå  ZCPR³ 
Environmenô  Descriptoò  anä responä  accordingly®   Iæ  thå 
Quieô  Flaç ió Seô (ON)¬  theî certaiî informativå  messageó 
arå  suppresseä iî ordeò tï cuô dowî oî thå "noise¢  createä 
bù thå command®   Iæ thå Quieô Flaç ió Reseô (OFF)¬ theî alì 
messages are displayed.

Selected Error Messages:

     Nï  Erroò Messageó arå generated®   Aî invaliä  commanä 
results in the Help screen being displayed.


Examples of Use:

     QUIET R
          - turn OFF (Reset) the Quiet Flag

     QUIET DISPLAY
          - Display the Quiet Flag

:REG       Register Display and Manipulation

Command:  REG 1.0

Syntax:

     REG Dr or REG r     <-- Display Register r
     REG Mr              <-- Minus (r=r-1) Register r
     REG Pr              <-- Plus (r=r+1) Register r
     REG Sr value        <-- Set (r=value) Register r

Function:

     REÇ displays¬  addó ± to¬  subtractó ± from¬ anä setó á 
valuå tï thå indicateä register®  Á ZCPR³ Registeò ió á one-
byte buffer (values are ranged from 0 to 255 decimal).

     Thå  valuå  useä tï indicatå á registeò ió á  characteò 
froí '0§ tï '9'®   Thå characteò '#§ indicateó alì registeró 
("REG S# 0" stores 0 to all ten registers).


Options:

     Shown Above

Comments:

     Registers are used for two purposes:

       1. to support looping in ZEX command files
          (do something N times)

       2. to pass parameter values from one program to
          another program which is executed later

     REÇ  haó á counterparô commanä iî thå  Systeí  Residenô 
Command Package provided in the ZCPR3 distribution.


Selected Error Messages:

     "Invlä Reç IDº c¢ meanó thaô thå registeò indicateä waó 
not symbolized by '0' to '9' or '#'.

Examples of Use:

     REG S5 25
          -- Register 5 = 25

     REG M#
          -- 1 is subtracted from all registers

:SETFILE   System File Assignment

Command:  SETFILE 1.0

Syntax:

     SETFILE n afn
or
     SETFILE n

Function:

     SETFILÅ seô thå namå oæ ZCPR³ Systeí Filå î (wherå î ió 
± tï 4© tï thå indicateä ambiguouó filå name®   Iæ nï AFÎ ió 
given¬  thå currenô contentó oæ thå indicateä Systeí Filå ió 
displayed.  A file number is required.

Options:

     None

Comments:

     ZCPR³  Systeí Fileó arå referenceä bù somå oæ thå ZCPR³ 
utilities¬  MENÕ  anä ALIAÓ iî particular®   SETFILÅ ió  thå 
meanó  bù whicè thå contentó oæ theså filå namå  bufferó  ió 
defined.

Selected Error Messages:

     "Invaliä Filå Namå Numbeò (noô 1-4)¢ meanó thaô á valiä 
filå  numbeò waó noô giveî afteò thå SETFILÅ verâ (SETFILÅ î 
afn).

Examples of Use:

     SETFILE 1 myfile.txt
          - System File 1 is set to MYFILE.TXT

     SETFILE 4
          - the name of System File 4 is displayed
:SHCTRL    Shell Stack Display and Manipulation

Command:  SHCTRL 1.0

Syntax:

     SHCTRL o

Function:

     SHCTRÌ  ió  useä tï providå somå controì oæ  thå  ZCPR³ 
Shelì  Stacë  froí thå commanä line®   Thå contentó  oæ  thå 
Shelì Stacë caî bå displayeä anä poppeä onå leveì oò cleareä 
completely.


Options:

     C - Clear the Shell Stack (no Shell is in effect)
     D - Display Shell Stack
     P - Pop the Shell Stack (the current Shell is stopped
          and the next Shell on the stack is invoked)

Comments:

     Onlù  onå  optioî maù bå useä iî conjunctioî  witè  thå 
SHCTRÌ  command®   Anù characteró followinç thió optioî  arå 
ignored.

     SHCTRÌ  ió  intendeä tï bå useä iî situationó  wherå  á 
directorù changå ió desireä anä á Shell¬ sucè aó MENU¬ ió iî 
execution®   Thå  Shelì Stacë caî bå popped¬  thå  directorù 
changå   performed¬   anä  thå  originaì  Shelì   explicitlù 
reinvoked.


Selected Error Messages:

     None - Help is printed if invalid option

Examples of Use:

     SHCTRL P
          - pop the Shell Stack one level

     SHCTRL D
          - display the contents of the Shell Stack


:SHOW      System Configuration Display and Error Handler

Command:  SHOW 1.0

Syntax:

     SHOW o

Function:

     SHO× ió thå ZCPR³ Environmenô Displaù utility®  Detailó 
oæ thå ZCPR³ Environmenô Descriptor¬  whaô systeí facilitieó 
arå  available¬  anä whaô thå statuó oæ theså facilitieó  ió 
arå  somå  oæ thå itemó includeä iî  thå  numerouó  displayó 
which are generated by SHOW.

     SHO× caî bå invokeä aó aî Erroò Handler¬  iî whicè caså 
itó  Erroò Handleò displaù caî givå thå commanä linå  statuó 
anä  itó otheò displays¬  sucè aó memorù examine¬  maù provå 
useful to analyze the state of the ZCPR3 System.

Options:

     E - Install SHOW as an Error Handler
          (no SHOW displays are invoked)

Comments:
     SHOW provides the following displays to the user:

  1. Package Data                  3. ZCPR3 System
     - Flow Command Package           - Environment Descriptor
     - Input/Output Package           - Message Buffers
     - Resident Command Package       - CRT and Printer Data
                                      - System File Definitions
  2. Environment Data
     - Error Handler
     - Memory Display Utility
     - Named Directory Display
     - Path Expression
     - Shell Stack


     SHO× ió screen-orienteä anä wilì noô functioî correctlù 
withouô propeò Z3TCAĞ support®   Thå Environmenô  Descriptoò 
MUST be installed with a valid Z3TCAP entry.

Selected Error Messages:

     Self-Explanatory

Examples of Use:

     Trù  iô  - you'lì likå it¡   SHO×  ió  totallù  screen-
orienteä  anä  wilì noô begiî tï functioî correctlù  withouô 
propeò  Z3TCAĞ  support®   Iæ thå useò enteró  SHO×  withouô 
proper support, the X command exits SHOW.

:Z3INS     ZCPR3 System Installation Program

Command:  Z3INS 1.0

Syntax:

     Z3INS ufn1 ufn2

          UFN1 must be an Environment Descriptor
          UFN2 must be a Z3INS Installation File

Function:

     Z3INÓ  installó thå fileó nameä iî á Z3INÓ Installatioî 
Filå  witè datá froí thå Environmenô  Descriptoò  specified®  
All files must be ZCPR3 Utilities.

     Thå   defaulô   filå  typeó  arå  ENÖ  foò  UFN±   (thå 
Environment Descriptor) and INS (the Installation File).


Options:

     None

Comments:

     Z3INÓ ió thå installatioî prograí foò thå ZCPR³ System®  
Alì utilitieó provideä iî thå ZCPR³ distributioî excepô  foò 
ZEX may be installed for a target system by using Z3INS.

     Á  ZCPR³  Installatioî  Filå  ió  simplù  á  texô  filå 
containinç twï typeó oæ linesº  á commenô line¬ whicè beginó 
witè  á semicoloî (;)¬  anä á linå containinç aî unambiguouó 
file name, which is a file to be installed.  Example:


     ; This is an installation file for my new utilities
      util1.com
          util2.com
     ; UTIL3 is really neat
     util3.com

            -- Sample Z3INS Installation File --


     Caså ió noô significant®   Leadinç spaceó oî eacè  linå 
are ignored.  Any file name MUST be unambiguous.

     Thå  Environmenô  Descriptoò referenceä iî thå  commanä 
linå ió á standarä ZCPR³ Systeî Environmenô descriptoò whicè 
is created by assembling a file like SYSENV.ASM.


Selected Error Messages:

     Alì   erroò  messageó  arå  verù  completå  anä   self-
explanatory.

Examples of Use:

     Z3INS SYS.ENV NEWFILES.INS
          -- Install the files listed in NEWFILES.INS with
               the data contained in SYS.ENV

     Z3INS NEWENV DIST
          -- Install the files listed in DIST.INS with
               the data contained in NEWENV.ENV

:Z3LOC     ZCPR3 System Segment Locator

Command:  Z3LOC 1.0

Syntax:

     Z3LOC o

Function:

     Z3LOÃ  ió useä tï locatå anä displaù thå  addresseó  oæ 
thå runninç ZCPR³ Commanä Processoò Replacement¬  BDOS¬  anä 
BIOS®   Iô maù alsï bå ruî undeò conventionaì CP/Í tï locatå 
anä  displaù  thå addresseó oæ thå runninç CP/Í 2.²  Consolå 
Command Processor, BDOS, and BIOS.

     Z3LOÃ ió alsï ablå tï displaù thå addresseó oæ á numbeò 
oæ  ZCPR³ Systeí Segmentó anä datá areaó iæ thå Ú optioî  ió 
given®   Thå  Ú optioî shoulä noô bå giveî iæ runninç  Z3LOÃ 
under CP/M 2.2.


Options:

     Z - Display addresses and data on ZCPR3 System Segments
          and data areas

Comments:

     Iæ  thå  Ú optioî ió giveî (Ú shoulä onlù bå  giveî  iæ 
runninç  Z3LOÃ  undeò  ZCPR3)¬   thå  followinç   additionaì 
address information is provided:

     ï Externaì Patè           ï Residenô Commanä Package
     o Input/Output Package    o Flow Command Package
     o Named Directory Buffer  o Command Line Buffer
     o Shell Stack             o Environment Descriptor
     o External FCB            o ZCPR3 Message Buffer
     o External Stack          o Wheel Byte


Selected Error Messages:

     Z3LOÃ  generateó nï erroò messages®   Aî invaliä optioî 
invokes a help screen.

Examples of Use:

     Z3LOC
          -- run Z3LOC for CPR/CCP, BDOS, and BIOS display
               (may be used this way under CP/M 2.2)

     Z3LOC Z
          -- display ZCPR3 data as well
               (may be used this way under ZCPR3 only)


